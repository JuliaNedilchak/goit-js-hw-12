{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport { pageNumber } from '../main';\nimport { imageName } from '../main';\nimport { amountPerPage } from '../main';\nexport async function getImages() {\n  axios.defaults.baseURL = 'https://pixabay.com/api/';\n\n  const response = await axios.get('', {\n    params: {\n      key: '42244412-4baf4dd8f3efd9c6d484c6d30',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      q: imageName,\n      page: pageNumber,\n      per_page: amountPerPage,\n    },\n  });\n  return response.data;\n}\n","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst form = document.querySelector('.form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadButton = document.querySelector('.load');\n\nexport let imageName = null;\nexport let pageNumber = 1;\nexport const amountPerPage = 15;\nlet totalResult = 0;\n\nimport { getImages } from './js/pixabay-api';\n\nloader.style.display = 'none';\nloadButton.style.display = 'none';\nform.addEventListener('submit', onFormSubmit);\nasync function onFormSubmit(e) {\n  e.preventDefault();\n  const name = e.target.elements.text.value;\n  imageName = name;\n  loader.style.display = 'block';\n  pageNumber = 1;\n  try {\n    const images = await getImages(name);\n    totalResult = images.totalHits;\n    if (images.hits.length === 0) {\n      gallery.innerHTML = '';\n      loader.style.display = 'none';\n      loadButton.style.display = 'none';\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    } else {\n      loader.style.display = 'none';\n      const markup = images.hits\n        .map(image => {\n          return `<li class=\"item\"> <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n     \n      src=\"${image.webformatURL}\"\n      \n      alt=\"${image.tags}\"\n    />\n  </a><ul class=\"list\">\n  <li class=\"group\"><p class=\"desc\">likes<span class=\"amount\">${image.likes}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">views<span class=\"amount\"> ${image.views}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">comments<span class=\"amount\"> ${image.comments}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">downloads<span class=\"amount\"> ${image.downloads}</span></p></li>\n  </ul>\n  </li>`;\n        })\n        .join('');\n\n      gallery.innerHTML = markup;\n      loadButton.style.display = 'block';\n    }\n\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n    lightbox.refresh();\n    checkButtonStatus();\n  } catch (error) {\n    console.error('Error data:', error);\n  }\n}\nform.reset();\n\nloadButton.addEventListener('click', loadMoreClick);\n\nasync function loadMoreClick() {\n  pageNumber += 1;\n  loader.style.display = 'block';\n  try {\n    const images = await getImages();\n\n    loader.style.display = 'none';\n    const markup = images.hits\n      .map(image => {\n        return `<li class=\"item\"> <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n    <img\n      class=\"gallery-image\"\n     \n      src=\"${image.webformatURL}\"\n      \n      alt=\"${image.tags}\"\n    />\n  </a><ul class=\"list\">\n  <li class=\"group\"><p class=\"desc\">likes<span class=\"amount\">${image.likes}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">views<span class=\"amount\"> ${image.views}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">comments<span class=\"amount\"> ${image.comments}</span></p></li>\n  <li class=\"group\"><p class=\"desc\">downloads<span class=\"amount\"> ${image.downloads}</span></p></li>\n  </ul>\n  </li>`;\n      })\n      .join('');\n\n    gallery.insertAdjacentHTML('beforeend', markup);\n    scrollAnotherGroup();\n    const lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n\n    lightbox.refresh();\n\n    checkButtonStatus();\n  } catch (error) {\n    console.error('Error data:', error);\n  }\n  form.reset();\n}\nfunction checkButtonStatus() {\n  const maxPages = Math.ceil(totalResult / amountPerPage);\n  const isLastPage = maxPages === pageNumber;\n  if (isLastPage) {\n    loadButton.style.display = 'none';\n    iziToast.error({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  }\n}\nfunction scrollAnotherGroup() {\n  const galleryItemHeight = gallery\n    .querySelector('.item')\n    .getBoundingClientRect().height;\n\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n    left: 0,\n  });\n}\n"],"names":["getImages","axios","imageName","pageNumber","amountPerPage","form","gallery","loader","loadButton","totalResult","onFormSubmit","e","name","images","iziToast","markup","image","SimpleLightbox","checkButtonStatus","error","loadMoreClick","scrollAnotherGroup","galleryItemHeight"],"mappings":"owBAIO,eAAeA,GAAY,CAChC,OAAAC,EAAM,SAAS,QAAU,4BAER,MAAMA,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAK,qCACL,WAAY,QACZ,YAAa,aACb,WAAY,OACZ,EAAGC,EACH,KAAMC,EACN,SAAUC,CACX,CACL,CAAG,GACe,IAClB,CCdA,MAAMC,EAAO,SAAS,cAAc,OAAO,EACrCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAa,SAAS,cAAc,OAAO,EAE1C,IAAIN,EAAY,KACZC,EAAa,EACjB,MAAMC,EAAgB,GAC7B,IAAIK,EAAc,EAIlBF,EAAO,MAAM,QAAU,OACvBC,EAAW,MAAM,QAAU,OAC3BH,EAAK,iBAAiB,SAAUK,CAAY,EAC5C,eAAeA,EAAaC,EAAG,CAC7BA,EAAE,eAAc,EAChB,MAAMC,EAAOD,EAAE,OAAO,SAAS,KAAK,MACpCT,EAAYU,EACZL,EAAO,MAAM,QAAU,QACvBJ,EAAa,EACb,GAAI,CACF,MAAMU,EAAS,MAAMb,EAAUY,CAAI,EAEnC,GADAH,EAAcI,EAAO,UACjBA,EAAO,KAAK,SAAW,EACzBP,EAAQ,UAAY,GACpBC,EAAO,MAAM,QAAU,OACvBC,EAAW,MAAM,QAAU,OAC3BM,EAAS,MAAM,CACb,QACE,0EACV,CAAO,MACI,CACLP,EAAO,MAAM,QAAU,OACvB,MAAMQ,EAASF,EAAO,KACnB,IAAIG,GACI,mDAAmDA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA,aAI1EA,EAAM,YAAY;AAAA;AAAA,aAElBA,EAAM,IAAI;AAAA;AAAA;AAAA,gEAGyCA,EAAM,KAAK;AAAA,iEACVA,EAAM,KAAK;AAAA,oEACRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA,QAG3E,EACA,KAAK,EAAE,EAEVV,EAAQ,UAAYS,EACpBP,EAAW,MAAM,QAAU,OAC5B,CAEgB,IAAIS,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACpB,CAAK,EACQ,QAAO,EAChBC,GACD,OAAQC,EAAO,CACd,QAAQ,MAAM,cAAeA,CAAK,CACnC,CACH,CACAd,EAAK,MAAK,EAEVG,EAAW,iBAAiB,QAASY,CAAa,EAElD,eAAeA,GAAgB,CAC7BjB,GAAc,EACdI,EAAO,MAAM,QAAU,QACvB,GAAI,CACF,MAAMM,EAAS,MAAMb,IAErBO,EAAO,MAAM,QAAU,OACvB,MAAMQ,EAASF,EAAO,KACnB,IAAIG,GACI,mDAAmDA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA,aAIxEA,EAAM,YAAY;AAAA;AAAA,aAElBA,EAAM,IAAI;AAAA;AAAA;AAAA,gEAGyCA,EAAM,KAAK;AAAA,iEACVA,EAAM,KAAK;AAAA,oEACRA,EAAM,QAAQ;AAAA,qEACbA,EAAM,SAAS;AAAA;AAAA,QAG7E,EACA,KAAK,EAAE,EAEVV,EAAQ,mBAAmB,YAAaS,CAAM,EAC9CM,IACiB,IAAIJ,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GACpB,CAAK,EAEQ,QAAO,EAEhBC,GACD,OAAQC,EAAO,CACd,QAAQ,MAAM,cAAeA,CAAK,CACnC,CACDd,EAAK,MAAK,CACZ,CACA,SAASa,GAAoB,CACV,KAAK,KAAKT,EAAcL,CAAa,IACtBD,IAE9BK,EAAW,MAAM,QAAU,OAC3BM,EAAS,MAAM,CACb,QAAS,4DACf,CAAK,EAEL,CACA,SAASO,GAAqB,CAC5B,MAAMC,EAAoBhB,EACvB,cAAc,OAAO,EACrB,sBAAqB,EAAG,OAE3B,OAAO,SAAS,CACd,IAAKgB,EAAoB,EACzB,SAAU,SACV,KAAM,CACV,CAAG,CACH"}